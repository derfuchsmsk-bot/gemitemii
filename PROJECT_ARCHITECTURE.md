# –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞: Telegram Bot + Vertex AI (Gemini & Image Gen)

## 1. –û–±—â–µ–µ –æ–ø–∏—Å–∞–Ω–∏–µ
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥—Å—Ç–∞–≤–ª—è–µ—Ç —Å–æ–±–æ–π Telegram-–±–æ—Ç–∞, —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–≥–æ –Ω–∞ Google Cloud Run. –ë–æ—Ç —Å–ª—É–∂–∏—Ç –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç—è–º Google Vertex AI.
–û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
1.  **–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π —á–∞—Ç:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –º–æ–¥–µ–ª–µ–π Gemini-3.0-flash-preview (–¥–ª—è –±—ã—Å—Ç—Ä—ã—Ö –æ—Ç–≤–µ—Ç–æ–≤) –∏ Gemini-3.0-pro-preview (–¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–¥–∞—á –∏ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π).
2.  **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π:** –§—É–Ω–∫—Ü–∏—è "Nano Banana Pro" (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–∞—Ä—Ç–∏–Ω–æ–∫ —á–µ—Ä–µ–∑ gemini-3.0-pro-preview, –∞ —Ç–∞–∫–∂–µ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π –ø–æ —Ç–µ–∫—Å—Ç–æ–≤–æ–º—É –æ–ø–∏—Å–∞–Ω–∏—é).
3.  **–ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å:** –ü–æ–ª–Ω–æ–µ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–Ω–æ–ø–∫–∏ Telegram (Inline –∏ Reply –∫–ª–∞–≤–∏–∞—Ç—É—Ä—ã).

## 2. –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫
*   **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:** Python 3.11+.
*   **–§—Ä–µ–π–º–≤–æ—Ä–∫ –¥–ª—è Telegram:** `aiogram 3.x` (–∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–π, –∏–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –≤—ã—Å–æ–∫–∏—Ö –Ω–∞–≥—Ä—É–∑–æ–∫).
*   **–í–µ–±-—Å–µ—Ä–≤–µ—Ä:** `FastAPI` –∏–ª–∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –≤–µ–±—Ö—É–∫-—Ö–µ–Ω–¥–ª–µ—Ä aiogram (–¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∞–ø–¥–µ–π—Ç–æ–≤ –æ—Ç Telegram –≤ Cloud Run).
*   **Cloud Provider:** Google Cloud Platform (GCP).
*   **Compute:** Google Cloud Run (Serverless –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã).
*   **AI Provider:** Google Vertex AI SDK.
*   **–•—Ä–∞–Ω–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):** Firestore –∏–ª–∏ Redis (–¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏—Å—Ç–æ—Ä–∏–∏ –¥–∏–∞–ª–æ–≥–∞, –µ—Å–ª–∏ —Ç—Ä–µ–±—É–µ—Ç—Å—è –∫–æ–Ω—Ç–µ–∫—Å—Ç). –î–ª—è MVP –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `MemoryStorage` (–≤ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω–æ–π –ø–∞–º—è—Ç–∏, —Å–±—Ä–∞—Å—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫–µ –∏–Ω—Å—Ç–∞–Ω—Å–∞).

## 3. –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Ä–µ—à–µ–Ω–∏—è

```mermaid
graph TD
    User[–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å Telegram] -->|–°–æ–æ–±—â–µ–Ω–∏—è/–ö–Ω–æ–ø–∫–∏/–§–∞–π–ª—ã| TG[Telegram API]
    TG -->|Webhook (HTTPS)| CR[Google Cloud Run Service]
    
    subgraph "Google Cloud Run Container"
        App[FastAPI / Aiogram Bot]
        Router[–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –ª–æ–≥–∏–∫–∏]
        State[–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º FSM]
    end
    
    CR --> App
    App --> Router
    
    Router -->|–¢–µ–∫—Å—Ç–æ–≤—ã–π –∑–∞–ø—Ä–æ—Å| VertexChat[Vertex AI (Gemini)]
    Router -->|–ó–∞–ø—Ä–æ—Å –∫–∞—Ä—Ç–∏–Ω–∫–∏ (–¢–µ–∫—Å—Ç)| VertexImg[Vertex AI (Imagen/Nano Banana)]
    Router -->|–ó–∞–ø—Ä–æ—Å —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è (–ö–∞—Ä—Ç–∏–Ω–∫–∞ + –¢–µ–∫—Å—Ç)| VertexImgEdit[Vertex AI (Multimodal)]
    
    VertexChat -->|–û—Ç–≤–µ—Ç —Ç–µ–∫—Å—Ç–∞| App
    VertexImg -->|URL –∫–∞—Ä—Ç–∏–Ω–∫–∏| App
    VertexImgEdit -->|URL –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–∏| App
    
    App -->|–û—Ç–ø—Ä–∞–≤–∫–∞ –æ—Ç–≤–µ—Ç–∞| TG
    TG --> User
```

## 4. –õ–æ–≥–∏–∫–∞ —Ä–∞–±–æ—Ç—ã –∏ UX (–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–π –ø—É—Ç—å)

### 4.1. –ì–ª–∞–≤–Ω–æ–µ –º–µ–Ω—é (–ö–æ–º–∞–Ω–¥–∞ /start)
–ü—Ä–∏ –∑–∞–ø—É—Å–∫–µ –±–æ—Ç –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç Reply-–∫–ª–∞–≤–∏–∞—Ç—É—Ä—É (–∫–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å—Ç—Ä–æ–∫–æ–π –≤–≤–æ–¥–∞):
*   üîò **–ß–∞—Ç (Gemini)** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤ —Ä–µ–∂–∏–º –æ–±—â–µ–Ω–∏—è.
*   üé® **Nano Banana Pro (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è)** ‚Äî –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç –≤ —Ä–µ–∂–∏–º –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏.
*   ‚öôÔ∏è **–ù–∞—Å—Ç—Ä–æ–π–∫–∏** ‚Äî –≤—ã–±–æ—Ä –º–æ–¥–µ–ª–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤.
*   ‚ùì **–ü–æ–º–æ—â—å** ‚Äî –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è.

### 4.2. –†–µ–∂–∏–º "–ß–∞—Ç" (Default)
*   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Ç–µ–∫—Å—Ç -> –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ Vertex AI (Gemini Flash –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é).
*   –ö–æ–Ω—Ç–µ–∫—Å—Ç –±–µ—Å–µ–¥—ã —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è (–ø–æ—Å–ª–µ–¥–Ω–∏–µ N —Å–æ–æ–±—â–µ–Ω–∏–π).
*   **–ö–Ω–æ–ø–∫–∏ –ø–æ–¥ —Å–æ–æ–±—â–µ–Ω–∏–µ–º –æ—Ç–≤–µ—Ç–∞:**
    *   [üîÑ –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∑–∞–Ω–æ–≤–æ]
    *   [üóë –û—á–∏—Å—Ç–∏—Ç—å –∫–æ–Ω—Ç–µ–∫—Å—Ç]

### 4.3. –†–µ–∂–∏–º "Nano Banana Pro" (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
–≠—Ç–æ—Ç —Ä–µ–∂–∏–º –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –¥–≤–∞ —Å—Ü–µ–Ω–∞—Ä–∏—è: —Å–æ–∑–¥–∞–Ω–∏–µ —Å –Ω—É–ª—è –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ.

**–°—Ü–µ–Ω–∞—Ä–∏–π –ê: –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ —Ç–µ–∫—Å—Ç—É**
*   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É "Nano Banana Pro".
*   –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç: "–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –∏–ª–∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–æ—Ç–æ –¥–ª—è —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è".
*   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç —Ç–µ–∫—Å—Ç.
*   –ë–æ—Ç —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç –∑–∞–ø—Ä–æ—Å –≤ Gemini-3.0-pro-preview.
*   –ë–æ—Ç –ø—Ä–∏—Å—ã–ª–∞–µ—Ç –∫–∞—Ä—Ç–∏–Ω–∫—É.

**–°—Ü–µ–Ω–∞—Ä–∏–π –ë: –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è (—Å–≤–æ–µ–≥–æ –∏–ª–∏ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ)**
1.  **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≤–æ–µ–≥–æ —Ñ–æ—Ç–æ:**
    *   –í —Ä–µ–∂–∏–º–µ "Nano Banana Pro" –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —Ñ–æ—Ç–æ (–∫–∞–∫ –∫–∞—Ä—Ç–∏–Ω–∫—É –∏–ª–∏ —Ñ–∞–π–ª).
    *   –ë–æ—Ç —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç: "–ß—Ç–æ –Ω—É–∂–Ω–æ –∏–∑–º–µ–Ω–∏—Ç—å/—Å–¥–µ–ª–∞—Ç—å —Å —ç—Ç–∏–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º?".
    *   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –≤–≤–æ–¥–∏—Ç –ø—Ä–æ–º–ø—Ç (–Ω–∞–ø—Ä–∏–º–µ—Ä, "–î–æ–±–∞–≤—å —à–ª—è–ø—É", "–°–¥–µ–ª–∞–π –≤ —Å—Ç–∏–ª–µ –∫–∏–±–µ—Ä–ø–∞–Ω–∫").
    *   –ë–æ—Ç –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –§–æ—Ç–æ + –ü—Ä–æ–º–ø—Ç –≤ –º–æ–¥–µ–ª—å.
    *   –ë–æ—Ç –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–Ω–æ–µ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ.

2.  **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞:**
    *   –ü–æ–¥ –ª—é–±–æ–π —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –µ—Å—Ç—å –∫–Ω–æ–ø–∫–∞ [‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å].
    *   –ü—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ –±–æ—Ç –∑–∞–ø–æ–º–∏–Ω–∞–µ—Ç —ç—Ç—É –∫–∞—Ä—Ç–∏–Ω–∫—É –∫–∞–∫ –∫–æ–Ω—Ç–µ–∫—Å—Ç.
    *   –ë–æ—Ç –ø—Ä–æ—Å–∏—Ç: "–í–≤–µ–¥–∏—Ç–µ –æ–ø–∏—Å–∞–Ω–∏–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π".
    *   –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–∏—à–µ—Ç —Ç–µ–∫—Å—Ç -> –ë–æ—Ç –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –Ω–æ–≤—ã–π –≤–∞—Ä–∏–∞–Ω—Ç –Ω–∞ –æ—Å–Ω–æ–≤–µ –ø—Ä–µ–¥—ã–¥—É—â–µ–≥–æ.

**–ö–Ω–æ–ø–∫–∏ –ø–æ–¥ –∫–∞—Ä—Ç–∏–Ω–∫–æ–π (–†–µ–∑—É–ª—å—Ç–∞—Ç):**
*   [üîÑ –ï—â–µ –≤–∞—Ä–∏–∞–Ω—Ç] (–ø–µ—Ä–µ–≥–µ–Ω–µ—Ä–∞—Ü–∏—è —Å —Ç–µ–º–∏ –∂–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞–º–∏)
*   [‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å] (–ø–µ—Ä–µ—Ö–æ–¥ –≤ —Ä–µ–∂–∏–º –ø—Ä–∞–≤–∫–∏ —ç—Ç–æ–≥–æ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)
*   [üì• –°–∫–∞—á–∞—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç]

### 4.4. –ú–µ–Ω—é "–ù–∞—Å—Ç—Ä–æ–π–∫–∏"
Inline-–∫–Ω–æ–ø–∫–∏ (–≤ —Å–æ–æ–±—â–µ–Ω–∏–∏) –¥–ª—è –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏—è —Ç–µ–∫—Å—Ç–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏:

*   **–¢–µ–∫—Å—Ç–æ–≤–∞—è –º–æ–¥–µ–ª—å:**
    *   –¢–µ–∫—É—â–∞—è –º–æ–¥–µ–ª—å: **Gemini-3.0-flash-preview** (–±—ã—Å—Ç—Ä–æ/–¥–µ—à–µ–≤–æ)
    *   [–ü–µ—Ä–µ–∫–ª—é—á–∏—Ç—å –Ω–∞ Gemini-3.0-pro-preview] (–∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω–æ/–º–µ–¥–ª–µ–Ω–Ω–æ)

*   **–ù–∞—Å—Ç—Ä–æ–π–∫–∏ Nano Banana Pro (–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è):**
    *   üìê **–°–æ–æ—Ç–Ω–æ—à–µ–Ω–∏–µ —Å—Ç–æ—Ä–æ–Ω:**
        *   [1:1 –ö–≤–∞–¥—Ä–∞—Ç] (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)
        *   [16:9 –ê–ª—å–±–æ–º–Ω–∞—è]
        *   [9:16 –ü–æ—Ä—Ç—Ä–µ—Ç–Ω–∞—è]
        *   [4:3] / [3:4] (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        *   [3:2] / [2:3] (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
        *   [4:5]   (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
    *   üé® **–°—Ç–∏–ª—å:**
        *   [–§–æ—Ç–æ—Ä–µ–∞–ª–∏–∑–º]
        *   [–ê–Ω–∏–º–µ/–ê—Ä—Ç]
        *   [–ë–µ–∑ —Å—Ç–∏–ª—è]

## 5. –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã

```text
.
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ (–∑–∞–ø—É—Å–∫ Webhook –∏ Bot)
‚îú‚îÄ‚îÄ Dockerfile              # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –æ–±—Ä–∞–∑–∞ –¥–ª—è Cloud Run
‚îú‚îÄ‚îÄ requirements.txt        # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ (aiogram, google-cloud-aiplatform, fastyapi)
‚îú‚îÄ‚îÄ cloudbuild.yaml         # (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ) CI/CD –¥–ª—è –¥–µ–ø–ª–æ—è
‚îú‚îÄ‚îÄ src/
‚îÇ   ‚îú‚îÄ‚îÄ __init__.py
‚îÇ   ‚îú‚îÄ‚îÄ config.py           # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è (–¢–æ–∫–µ–Ω—ã, Project ID, Region)
‚îÇ   ‚îú‚îÄ‚îÄ bot.py              # –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–æ—Ç–∞ –∏ –¥–∏—Å–ø–µ—Ç—á–µ—Ä–∞
‚îÇ   ‚îú‚îÄ‚îÄ handlers/           # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ –∫–æ–º–∞–Ω–¥
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ common.py       # /start, /help
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ chat.py         # –õ–æ–≥–∏–∫–∞ –æ–±—â–µ–Ω–∏—è —Å Gemini
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ image_gen.py    # –õ–æ–≥–∏–∫–∞ Nano Banana Pro (–ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ settings.py     # –ú–µ–Ω—é –Ω–∞—Å—Ç—Ä–æ–µ–∫
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ vertex_ai.py    # –û–±–µ—Ä—Ç–∫–∞ –Ω–∞–¥ Vertex AI SDK
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ prompts.py      # –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
‚îÇ   ‚îî‚îÄ‚îÄ keyboards/          # –§–∞–π–ª—ã —Å –∫–Ω–æ–ø–∫–∞–º–∏ (inline –∏ reply)
‚îÇ       ‚îú‚îÄ‚îÄ main_menu.py
‚îÇ       ‚îî‚îÄ‚îÄ settings_kbs.py
‚îî‚îÄ‚îÄ key.json                # (–ù–µ –∫–æ–º–º–∏—Ç–∏—Ç—å!) –°–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç GCP –¥–ª—è –ª–æ–∫–∞–ª—å–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤
```

## 6. –î–µ—Ç–∞–ª–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Vertex AI

### –¢–µ–∫—Å—Ç–æ–≤—ã–µ –º–æ–¥–µ–ª–∏
–ë—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏–±–ª–∏–æ—Ç–µ–∫—É `vertexai.generative_models`.
*   **Flash:** `gemini-3.0-flash-preview` 
*   **Pro:** `gemini-3.0-pro-preview`.

–ö–æ–¥ –±—É–¥–µ—Ç –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ `model_name` –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –≤—ã–±–æ—Ä–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞—Ö.

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∏ –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (Nano Banana Pro)
–ò—Å–ø–æ–ª—å–∑—É–µ–º `gemini-3.0-pro-preview`. –≠—Ç–æ—Ç –∫–ª–∞—Å—Å –º–æ–¥–µ–ª–µ–π –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –º—É–ª—å—Ç–∏–º–æ–¥–∞–ª—å–Ω—ã–π –≤–≤–æ–¥ (–¢–µ–∫—Å—Ç + –ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ).

**–ê–ª–≥–æ—Ä–∏—Ç–º:**
1.  **–ì–µ–Ω–µ—Ä–∞—Ü–∏—è:** –í—Ö–æ–¥ = [Prompt]. –í—ã—Ö–æ–¥ = Image.
2.  **–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ:** –í—Ö–æ–¥ = [Source Image bytes] + [Prompt ("Make it cyberpunk")]. –í—ã—Ö–æ–¥ = New Image.

–§—É–Ω–∫—Ü–∏—è –±—É–¥–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å:
*   **–ü—Ä–æ–º–ø—Ç** (str).
*   **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ** (Optional[bytes]) - –¥–ª—è —Ä–µ–∂–∏–º–∞ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è.
*   **–ü–∞—Ä–∞–º–µ—Ç—Ä—ã** (Aspect Ratio).

–í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –±–∞–π—Ç—ã –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è.
